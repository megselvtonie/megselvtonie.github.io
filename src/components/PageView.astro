---
import DateTag from "./DateTag.astro";
---



<div class="pageview">
 <p>
   <strong>OMG, JEG ER SÅÅÅ STOLT AV DENNE:
    Du, jeg og andre har nemlig kommet inn, klikket og rørt på siden min →
  <!-- Her kommer tallene inn dynamisk -->
  <span id="today-count" class="badge">…</span> ganger i dag.</strong> Tallet øker hver gang du laster inn siden gjennom oppdatering, klikking på sider her inne osv. Telleren er ikke perfekt og den skal egentlig telle antall unike personer som er innom, men sånt kan jeg ikke og da må jeg gjøre backend-kode og det kan jeg ikke. Det er klikket →
  <span id="total-count" class="badge">…</span> ganger siden 7. september klokka 18.28. <small>nb! Det er mest meg som klikker mens jeg har testet siden, da klikker jeg kanskje på den opp til 100 ganger i timen, men jeg prøver å kode siden :)</small>
  </p>
</div>

<script is:inline>
  async function loadCounter() {
    try {
      const res = await fetch("https://hitscounter.dev/api/hit?output=json&url=megselvtonie.me");
      const json = await res.json();

      document.getElementById("today-count").textContent = json.today_hits ?? "0";
      document.getElementById("total-count").textContent = json.total_hits ?? "0";
    } catch (err) {
      document.getElementById("today-count").textContent = "?";
      document.getElementById("total-count").textContent = "?";
      console.error("{{Feil: her skal det egentlig stå en teller, men den er borte akk nå}}", err);
    }
  }
  loadCounter();
</script>

<style>
  .pageview {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
      Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue',
      sans-serif;
    font-size: 0.65rem;
    font-weight: 400;
    line-height: 1.5;
    border: solid;
    padding: 0.1rem 0.3rem;
    margin: 0 0.2rem;
  }

  .badge {
    display: inline-block;
    border: solid;
    color: blueviolet;
    font-size: 0.65rem;
    font-style: italic;
    font-weight: 600;
    padding: 0.1rem 0.3rem;
    margin: 0 0.2rem;
  }
</style>
